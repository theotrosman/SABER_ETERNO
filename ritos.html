<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ritos | Iglesia del Saber Eterno</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Cinzel+Decorative:wght@700&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: radial-gradient(circle, #000 70%, #150000 100%);
      color: #ddd;
      font-family: 'Cinzel Decorative', serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      cursor: crosshair;
    }

    header {
      width: 100%;
      background: rgba(0,0,0,0.9);
      padding: 20px 50px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0; left: 0;
      z-index: 10;
    }

    header h1 {
      font-family: 'UnifrakturCook', cursive;
      font-size: 2rem;
      color: #f5f5f5;
      text-shadow: 0 0 15px #ff0000, 0 0 40px #800;
    }

    nav { display: flex; gap: 30px; }
    nav a {
      text-decoration: none;
      font-size: 1.1rem;
      color: #eee;
      transition: 0.3s ease;
    }
    nav a:hover {
      color: #fff;
      text-shadow: 0 0 25px #ff0000, 0 0 60px #800;
    }

    main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding-top: 140px;
      position: relative;
    }

    /* Modelo central */
    model-viewer {
      width: 650px;
      height: 650px;
      filter: drop-shadow(0 0 50px rgba(255,0,0,0.7));
      animation: aura 6s infinite alternate;
      z-index: 2;
    }

    @keyframes aura {
      from { filter: drop-shadow(0 0 40px rgba(255,0,0,0.4)); }
      to { filter: drop-shadow(0 0 90px rgba(255,30,30,1)); }
    }

    /* Runas detrás */
    .runas {
      position: absolute;
      width: 850px;
      height: 850px;
      border-radius: 50%;
      border: 2px dashed rgba(255,0,0,0.35);
      animation: spin 30s linear infinite;
      z-index: 1;
      top: 120px;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Texto ritual */
    .versos {
      position: absolute;
      width: 100%;
      text-align: center;
      bottom: 40px;
      z-index: 3;
      padding: 0 100px;
    }

    .versos p {
      font-size: 1.4rem;
      margin: 15px 0;
      opacity: 0;
      animation: fadeIn 2s forwards;
    }

    .versos p:nth-child(1) { animation-delay: 1s; }
    .versos p:nth-child(2) { animation-delay: 3s; }
    .versos p:nth-child(3) { animation-delay: 5s; }
    .versos p:nth-child(4) { animation-delay: 7s; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Scramble anim */
    .scramble { position: relative; }
  </style>

  <!-- Precarga rápida -->
  <link rel="preload" href="ophanim_angel.glb" as="fetch" type="model/gltf-binary">
  <link rel="prefetch" href="ophanim_angel.glb" as="fetch" type="model/gltf-binary">
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
  <header>
    <h1 class="scramble">Iglesia del Saber Eterno</h1>
    <nav>
      <a href="index.html" class="scramble">Inicio</a>
      <a href="historia.html" class="scramble">Historia</a>
      <a href="ritos.html" class="scramble">Ritos</a>
      <a href="contacto.html" class="scramble">Contacto</a>
    </nav>
  </header>

  <main>
    <div class="runas"></div>
    <model-viewer 
      src="ophanim_angel.glb"
      autoplay
      animation-name="Armature.001|Armature.002Action.002"
      auto-rotate
      auto-rotate-delay="0"
      rotation-per-second="3deg"
      shadow-intensity="1"
      exposure="0.7"
      interaction-prompt="none"
      loading="eager"
      reveal="auto"
      poster="black"
      environment-image="neutral">
    </model-viewer>

    <div class="versos">
      <p class="scramble">«Los ojos del Ophanim jamás se cierran; cada parpadeo humano es contado.»</p>
      <p class="scramble">«El rito exige silencio, pues la voz invoca aquello que no puede ser contenido.»</p>
      <p class="scramble">«Quien ofrece su nombre en el círculo arde, pero su eco se graba en la eternidad.»</p>
      <p class="scramble">«El Ángel de los Anillos no juzga, solo observa. Y en su mirada quedas marcado.»</p>
    </div>
  </main>

  <script>
    // Precarga manual del modelo
    fetch("ophanim_angel.glb").then(()=>console.log("Modelo Ophanim precargado ✅"));

    // Scramble dinámico
    const chars = "!<>-_\\/[]{}—=+*^?#ΩΨΦ§";
    function randomChar() { return chars[Math.floor(Math.random() * chars.length)]; }

    function scrambleText(el) {
      const original = el.dataset.original || el.textContent;
      if (!el.dataset.original) el.dataset.original = original;
      let output = '';
      for (let i = 0; i < original.length; i++) {
        if (Math.random() < 0.12) { 
          output += randomChar();
        } else {
          output += original[i];
        }
      }
      el.textContent = output;
      setTimeout(()=>{ el.textContent = original; }, 250); 
    }

    setInterval(()=>{
      const elements = document.querySelectorAll('.scramble');
      const el = elements[Math.floor(Math.random() * elements.length)];
      scrambleText(el);
    }, 1000);
  </script>
</body>
</html>
