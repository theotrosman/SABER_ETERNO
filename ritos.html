<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ritos | Iglesia del Saber Eterno</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Cinzel+Decorative:wght@700&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #000;
      color: #ddd;
      font-family: 'Cinzel Decorative', serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      cursor: crosshair;
    }

    header {
      width: 100%;
      background: rgba(0,0,0,0.9);
      padding: 20px 50px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0; left: 0;
      z-index: 10;
    }

    header h1 {
      font-family: 'UnifrakturCook', cursive;
      font-size: 2rem;
      color: #f5f5f5;
      text-shadow: 0 0 15px #ff0000, 0 0 40px #800;
    }

    nav { display: flex; gap: 30px; }
    nav a {
      text-decoration: none;
      font-size: 1.1rem;
      color: #eee;
      text-shadow: 0 0 10px #f00;
      transition: 0.3s ease;
    }
    nav a:hover {
      color: #fff;
      text-shadow: 0 0 25px #ff0000, 0 0 60px #800;
    }

    main {
      margin-top: 120px;
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    /* Modelo central */
    model-viewer {
      width: 700px;
      height: 700px;
      filter: drop-shadow(0 0 40px rgba(255,0,0,0.8));
      animation: aura 6s infinite alternate;
    }

    @keyframes aura {
      from { filter: drop-shadow(0 0 20px rgba(255,0,0,0.5)); }
      to { filter: drop-shadow(0 0 80px rgba(255,50,50,1)); }
    }

    /* Texto ritual */
    .versos {
      position: absolute;
      bottom: 40px;
      text-align: center;
      width: 100%;
    }

    .versos p {
      font-size: 1.4rem;
      margin: 10px 0;
      opacity: 0;
      animation: fadeGlitch 2s forwards;
    }

    .versos p:nth-child(1) { animation-delay: 1s; }
    .versos p:nth-child(2) { animation-delay: 3s; }
    .versos p:nth-child(3) { animation-delay: 5s; }

    @keyframes fadeGlitch {
      0% { opacity: 0; transform: scale(1.1); }
      50% { opacity: 1; text-shadow: 2px 0 red, -2px 0 blue; }
      100% { opacity: 1; text-shadow: 0 0 20px #f00, 0 0 60px #800; }
    }

    .scramble {
      animation: glitchText 3s infinite;
    }

    @keyframes glitchText {
      0% { text-shadow: 2px 0 red, -2px 0 blue; }
      20% { text-shadow: -3px -3px red, 3px 3px blue; transform: skew(0.5deg); }
      40% { text-shadow: 3px 2px red, -2px -2px blue; }
      60% { text-shadow: -4px 0 red, 4px 0 blue; }
      80% { text-shadow: 4px 4px red, -4px -4px blue; transform: skew(-0.8deg); }
      100% { text-shadow: 0 0 25px #ff0000, 0 0 80px #800; }
    }
  </style>

  <!-- Precarga rápida -->
  <link rel="preload" href="ophanim_angel.glb" as="fetch" type="model/gltf-binary">
  <link rel="prefetch" href="ophanim_angel.glb" as="fetch" type="model/gltf-binary">
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
  <header>
    <h1 class="scramble">Iglesia del Saber Eterno</h1>
    <nav>
      <a href="index.html" class="scramble">Inicio</a>
      <a href="historia.html" class="scramble">Historia</a>
      <a href="ritos.html" class="scramble">Ritos</a>
      <a href="contacto.html" class="scramble">Contacto</a>
    </nav>
  </header>

  <main>
    <model-viewer 
      src="ophanim_angel.glb"
      autoplay
      animation-name="Armature.001|Armature.002Action.002"
      auto-rotate
      auto-rotate-delay="0"
      rotation-per-second="3deg"
      shadow-intensity="1"
      exposure="0.7"
      camera-controls="false"
      interaction-prompt="none"
      loading="eager"
      reveal="auto"
      poster="black"
      environment-image="neutral">
    </model-viewer>

    <div class="versos">
      <p class="scramble">«Los ojos vigilan, incluso cuando cierras los tuyos.»</p>
      <p class="scramble">«El rito consume, el juramento arde.»</p>
      <p class="scramble">«La eternidad observa, y ya te ha marcado.»</p>
    </div>
  </main>

  <script>
    // Precarga manual para acelerar aún más
    fetch("ophanim_angel.glb").then(()=>console.log("Modelo Ophanim precargado ✅"));

    // Scramble extra dinámico
    const chars = "!<>-_\\/[]{}—=+*^?#ΩΨΦ§";
    function randomChar() { return chars[Math.floor(Math.random() * chars.length)]; }

    function scrambleText(el) {
      const original = el.dataset.original || el.textContent;
      if (!el.dataset.original) el.dataset.original = original;
      let output = '';
      for (let i = 0; i < original.length; i++) {
        if (Math.random() < 0.15) {
          output += randomChar();
        } else {
          output += original[i];
        }
      }
      el.textContent = output;
      setTimeout(()=>{ el.textContent = original; }, 250);
    }

    setInterval(()=>{
      const elements = document.querySelectorAll('.scramble');
      const el = elements[Math.floor(Math.random() * elements.length)];
      scrambleText(el);
    }, 1200);
  </script>
</body>
</html>
