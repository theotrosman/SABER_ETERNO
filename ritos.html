<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ritos | Iglesia del Saber Eterno</title>
  <link rel="preload" href="ophanim_angel.glb" as="fetch" type="model/gltf-binary" crossorigin="anonymous">
<link rel="prefetch" href="ophanim_angel.glb" as="fetch" type="model/gltf-binary" crossorigin="anonymous">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Cinzel+Decorative:wght@700&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: radial-gradient(circle, #000 70%, #150000 100%);
      color: #ddd;
      font-family: 'Cinzel Decorative', serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      cursor: crosshair;
    }

    header {
      width: 100%;
      background: rgba(0,0,0,0.9);
      padding: 20px 50px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0; left: 0;
      z-index: 10;
    }

    header h1 {
      font-family: 'UnifrakturCook', cursive;
      font-size: 2rem;
      color: #f5f5f5;
      text-shadow: 0 0 15px #ff0000, 0 0 40px #800;
    }

    nav { display: flex; gap: 30px; }
    nav a {
      text-decoration: none;
      font-size: 1.1rem;
      color: #eee;
      transition: 0.3s ease;
    }
    nav a:hover {
      color: #fff;
      text-shadow: 0 0 25px #ff0000, 0 0 60px #800;
    }

    main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding-top: 120px;
      position: relative;
    }

    /* Modelo central */
    model-viewer {
      width: 600px;
      height: 600px;
      filter: drop-shadow(0 0 50px rgba(148, 30, 30, 0.7));
      animation: aura 7s infinite alternate;
      z-index: 2;
    }

    @keyframes aura {
  from { filter: drop-shadow(0 0 20px rgba(180,0,0,0.3)); }
  to   { filter: drop-shadow(0 0 50px rgba(200,20,20,0.5)); }
}

    /* Runas detrás */
    

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Texto ritual */
    .versos {
      margin-top: 40px;
      text-align: center;
      width: 80%;
      z-index: 3;
    }

    .versos p {
      font-size: 1.3rem;
      margin: 12px 0;
      opacity: 0;
      animation: fadeIn 2s forwards;
      line-height: 2rem;
    }

    .versos p:nth-child(1) { animation-delay: 1s; }
    .versos p:nth-child(2) { animation-delay: 2.5s; }
    .versos p:nth-child(3) { animation-delay: 4s; }
    .versos p:nth-child(4) { animation-delay: 5.5s; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Letras sangrientas aleatorias */
    .sangre {
      color: #ff4444;
      text-shadow: 0 0 8px #f00, 0 0 20px #800;
      transition: color 0.3s ease, text-shadow 0.3s ease;
    }
    .neblina {
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  z-index: 0; /* detrás de todo */
  background: radial-gradient(circle at center, rgba(80,0,0,0.15) 0%, rgba(0,0,0,0.9) 80%);
  pointer-events: none; /* que no moleste */
  mix-blend-mode: lighten; /* opcional, mezcla con el fondo */
  animation: moverNiebla 60s linear infinite;
  background-size: 200% 200%;
}

@keyframes moverNiebla {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}

  </style>

  <link rel="preload" href="ophanim_angel.glb" as="fetch" type="model/gltf-binary">
  <link rel="prefetch" href="ophanim_angel.glb" as="fetch" type="model/gltf-binary">
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
    <div class="neblina"></div>
  <header>
    <h1>Iglesia del Saber Eterno</h1>
    <nav>
      <a href="index.html">Inicio</a>
      <a href="historia.html">Historia</a>
      <a href="ritos.html">Ritos</a>
      <a href="contacto.html">Contacto</a>
    </nav>
  </header>

  <main>
    <div class="runas"></div>
    <model-viewer 
      src="ophanim_angel.glb"
      autoplay
      animation-name="Armature.001|Armature.002Action.002"
      auto-rotate
      auto-rotate-delay="0"
      rotation-per-second="10deg"
      shadow-intensity="1"
      exposure="0.7"
      interaction-prompt="none"
      loading="eager"
      reveal="auto"
      poster="black"
      environment-image="neutral">
    </model-viewer>

    <div class="versos">
      <p>«Los ojos del Ophanim jamás se cierran; cada parpadeo humano es contado.»</p>
      <p>«El rito exige silencio, pues la voz invoca aquello que no puede ser contenido.»</p>
      <p>«Quien ofrece su nombre en el círculo arde, pero su eco se graba en la eternidad.»</p>
      <p>«El Ángel de los Anillos no juzga, solo observa. Y en su mirada quedas marcado.»</p>
    </div>
  </main>

  <script>
    // Precarga
    fetch("ophanim_angel.glb").then(()=>console.log("Modelo Ophanim precargado ✅"));

    // Efecto letras rojas sangrientas en versos
    function sangrarLetras() {
      const versos = document.querySelectorAll('.versos p');
      versos.forEach(p => {
        const letras = p.textContent.split('');
        p.innerHTML = letras.map(l => {
          if (Math.random() < 0.07 && l !== ' ') {
            return `<span class="sangre">${l}</span>`;
          } else {
            return l;
          }
        }).join('');
      });
    }

    setInterval(sangrarLetras, 1500);
  </script>
  <script>
  if ('caches' in window) {
    caches.open('model-cache').then(cache => {
      cache.add('ophanim_angel.glb').then(() => {
        console.log("✅ Modelo cacheado para cargas futuras");
      });
    });
  }
</script>
<script>
  fetch("ophanim_angel.glb")
    .then(res => res.blob())
    .then(blob => {
      const url = URL.createObjectURL(blob);
      document.querySelector("model-viewer").setAttribute("src", url);
      console.log("✅ Modelo cargado y streameado");
    });
</script>

</body>
</html>
